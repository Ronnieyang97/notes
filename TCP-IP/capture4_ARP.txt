第四章 ARP：地址解析协议
数据链路如以太网或令牌环网都有自己的寻址机制，这是使用数据链路的网络层必须遵从的，一个网络可以同时被不同的网络层使用
ARP为ip地址到对应的硬件地址之间提供动态映射。
硬件地址为48bit表示不同的以太网或令牌环网络接口，TCP/IP有自己的32bit的IP地址，ARP的功能就是在两者之间提供动态映射

ftp bsdi的执行过程：
1）应用程序FTP客户端调用函数gethostbyname把主机名bsdi转换成32bit的IP地址，这个函数在DNS中被称作解析器。
2）FTP客户端请求TCP用得到的IP地址建立连接
3）TCP发送一个连接请求分段到远端的主机，即用上述IP地址发送一份IP数据报
4）假定是以太网，那么发送端主机必须把32bit的IP地址转换成48bit的以太网地址。从逻辑Internet地址到对应的物理硬件地址需要进行翻译，这就是ARP的功能，本来用于广播网络。
5）ARP发送一份称作ARP请求的以太网数据帧给以太网上的每个主机，这个过程称为广播。ARP请求中包含目的主机的IP地址，表明如果你是这个IP地址的拥有者请回答你的硬件地址
6）目的主机收到这份广播报文后识别出是发送端在询问他的IP地址，于是发送一个ARP应答。包含IP地址和对应的硬件地址
7）收到ARP应答以后，就能发送IP数据报到目的主机了

点对点的链路不使用ARP因为当设置这些链路时，必须告知内核链路每一端的IP地址
如果ARP请求是从一个网络的主机发往另一个网络上的主机，那么连接这两个网络的路由器就可以回答该请求，即ARP代理。
免费ARP是指主机发送ARP查询自己的IP地址。可以通过这个操作确定另一个主机是否设置了相同的IP地址；如果该主机刚好改变了硬件地址，那么这就能使别的主机高速缓存中的旧的硬件地址获得更新

#####################################################################
习题
4.2 请描述如何判断一个给定主机是否能正确处理接收到的非必要ARP请求的方法
保证主机上的ARP缓存中没有登记以太网上的某个叫做foo的主机
保证foo引导时发送一个免费的ARP请求，也许是在foo引导时，在那台主机上运行tcpdump
然后关闭主机foo，使用说明了temo选项的arp命令，在系统的ARP缓存中为foo输入一个不正确的登记项
引导foo并在他启动好以后，查看主机的ARP缓存，不正确的登记项是否被更正
