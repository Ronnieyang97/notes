第六章 ICMP： Internet控制报文协议

ICMP是IP层的一个组成部分，传递差错报文以及其他需要注意的信息
ICMP报文通常被IP层或更高层协议使用，也会将差错报文返回给用户进程

ICMP被封装在IP数据报内部位于IP首部（20字节）的后面
ICMP前四个字节都是一样的，类型字段（15个）描述特定类型，代码字段进一步描述不同的条件
‘检验和’字段覆盖整个ICMP报文

############################################################################
习题
6.1 有五种不发送ICMP差错报文的特殊条件。如果这些条件不满足而又在局域网上向一个似乎不存在的端口号发送一份UDP数据报，这时会发生什么样的情况
	1）ICMP差错报文（ICMP查询报文可能产生ICMP差错报文）
	2）目的地址是广播地址或多播地址的IP数据报
	3）作为链路层广播的数据报
	4)不是IP分片的第一片（11章）
	5）源地址不是单个主机的数据报；即源地址不能为零地址、环回地址、广播地址或多播地址
如果在局域网线上有一百个主机，每个都可能在同一时刻发送一个ICMP端口不可达到的报文，很多报文的传输都可能发生冲突，这将导致1秒或2秒的时间里网络不可用。

6.2 生成一个ICMP端口不可达差错为‘必须’，‘应该’还是‘可能’
他是一个‘should’

6.3 IP的服务类型字段是如何被ICMP设置的
发送一个ICMP差错总是将TOS置为0.发送一个ICMP查询请求可以将TOS置为任何值，但是发送相应的应答必须将TOS置为相同的值

6.4 如何用netstat命令查看接受和发送的ICM报文类型
netstat -s是查看每个协议统计数据的常用方法。
	
