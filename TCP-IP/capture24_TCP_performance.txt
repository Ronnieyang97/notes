第二十四章 TCP的未来与性能
TCP的路径MTU发现按照如下方式进行：在连接建立时，TCP使用输出接口或对端声明的MSS中的最小MTU作为起始的报文段大小。路径MTU发现不允许TCP超过对端声明的MSS.如果对端没有指定一个MSS，则默认。
一旦选定了起始报文段大小，在该链接上的所有被TCP发送的IP数据报都将被设置DF比特，如果中间路由器需要对一个设置了DF标志的数据报进行分片，则丢弃这个数据报
如果收到这个ICMP差错，TCP就减少段大小并进行重传。
具有大的带宽时延乘积的网络被称为长肥网络，运行在长肥网络上的TCP连接被称为长肥管道。该管道会遇到多种问题。
时间戳选项使发送方在每个报文段中放置一个时间戳值，接收方在确认中返回这个数值，从而允许发送方为每一个收到的ACK计算RTT（TCP常用一个ACK来确认多个报文段）为了减少任一端所谓维持的状态数量，对于每个连接只保持一个时间戳的数值：1）TCP跟踪下一个ACK中要发送的时间戳值以及最后发送的ACK中的确认序号。2）当一个包含有字节序号lastack的报文段到达时，则该报文段中的时间戳被保存在tsrecent中3）无论何时发送一个时间戳选项，tsrecent就作为时间戳回显应答字段被发送，序号字段被保存在lastack中。
TCP提供的是一种虚电路方式的运输服务，一个连接的生存时间包括三个不同的阶段：建立、数据传输、终止。非常适合诸如远程注册和文件传输之类的应用。仍有其他应用被设计成事务服务，一个事务就是符合以下特征的客户请求和随后的服务器响应。
1）应该避免建立连接和链接终止的开销，在可能的时候发送一个请求分组并接收应答分组
2）等待时间应当减少到等于RTT与SPT之和
3）服务器应当能检测出重复的请求，并且当收到一个重复的请求时不重新处理事务
